# 个性化食谱管理系统需求规格说明书

## 1. 项目概述

### 1.1 项目背景
随着健康饮食理念的普及，用户对于个性化饮食方案的需求日益增长。本项目旨在开发一款个性化食谱管理系统，通过AI技术根据用户提供的食材和饮食禁忌，智能生成符合用户需求的食谱，并提供营养分析和个性化推荐服务。

### 1.2 项目目标
- 开发用户友好的前端界面，支持食材输入、饮食禁忌设置
- 实现AI驱动的食谱生成功能，调用阿里通义千问API
- 构建高效的后端服务，处理用户请求并管理数据
- 设计合理的数据库结构，存储食谱和用户偏好信息
- 提供食谱收藏、评分等个性化功能

## 2. 功能需求（Functional Requirements）

### 2.1 前端功能

#### 2.1.1 用户输入管理
- **食材输入功能**：用户可以输入现有食材列表，支持手动输入和预设食材选择
- **饮食禁忌设置**：用户可以设置饮食禁忌（如素食、无麸质、低糖等）
- **口味偏好设置**：用户可以选择偏好口味（如麻辣、清淡、酸甜等）

#### 2.1.2 食谱展示功能
- **食谱列表展示**：以卡片或列表形式展示AI生成的食谱
- **食谱详情展示**：显示详细的食材清单、步骤、营养成分分析
- **食谱搜索功能**：支持按食材、菜系、烹饪时间等条件搜索

#### 2.1.3 用户交互功能
- **食谱收藏功能**：用户可以收藏喜欢的食谱
- **食谱评分功能**：用户可以对食谱进行评分（1-5星）
- **分享功能**：支持将食谱分享到社交媒体

### 2.2 后端功能

#### 2.2.1 API接口服务
- **食材处理接口**：接收并解析用户输入的食材信息
- **食谱生成接口**：调用阿里通义千问API生成符合条件的食谱
- **营养计算接口**：根据食谱计算并返回营养成分数据
- **用户认证接口**：处理用户注册、登录、个人信息管理

#### 2.2.2 数据处理服务
- **数据验证服务**：验证用户输入数据的合法性
- **食谱解析服务**：解析AI生成的食谱内容，提取结构化信息
- **营养分析服务**：根据食材用量计算卡路里、蛋白质、碳水等营养成分

#### 2.2.3 个性化服务
- **用户偏好管理**：存储和更新用户的饮食偏好
- **推荐算法**：根据用户历史收藏和评分推荐相似食谱

### 2.3 数据库功能

#### 2.3.1 数据存储
- **食谱表**：存储食谱ID、名称、食材列表、烹饪步骤、营养数据等
- **用户表**：存储用户ID、用户名、密码（加密）、饮食偏好等
- **收藏表**：存储用户收藏的食谱记录
- **评分表**：存储用户对食谱的评分记录
- **食材表**：存储食材基本信息和营养数据

#### 2.3.2 数据查询
- **支持高效的食谱检索**：按食材、标签、烹饪时间等条件
- **支持用户数据查询**：查询个人收藏、评分历史等

## 3. 非功能需求（Non-Functional Requirements）

### 3.1 性能需求
- **响应时间**：前端页面加载时间不超过2秒
- **API响应时间**：食谱生成接口响应时间不超过10秒
- **并发处理**：系统支持至少50个并发用户访问

### 3.2 安全需求
- **数据加密**：用户密码采用加密存储
- **API安全**：实现API访问认证和授权机制
- **数据保护**：敏感用户数据加密传输

### 3.3 可用性需求
- **系统可用性**：系统运行时间达到99.5%以上
- **错误处理**：提供友好的错误提示和异常处理机制

### 3.4 可维护性需求
- **代码结构**：遵循模块化设计原则
- **文档完善**：提供详细的技术文档和API文档
- **版本控制**：使用Git进行代码版本管理

## 4. 技术栈要求

### 4.1 前端技术
- **框架**：React
- **状态管理**：Redux或Context API
- **UI组件库**：Ant Design或Material-UI
- **HTTP客户端**：Axios

### 4.2 后端技术
- **框架**：Python FastAPI（异步接口）
- **数据库驱动**：SQLAlchemy
- **认证机制**：JWT (JSON Web Token)
- **API文档**：Swagger/OpenAPI

### 4.3 数据库技术
- **数据库类型**：PostgreSQL
- **版本控制**：Alembic进行数据库迁移管理

### 4.4 第三方服务
- **大模型API**：阿里通义千问API
- **部署服务**：可选Docker容器化部署

## 5. 数据模型设计

### 5.1 用户表（users）
- user_id (PK, UUID)
- username (VARCHAR(100))
- password_hash (VARCHAR(255))
- email (VARCHAR(255))
- diet_preferences (JSONB)
- created_at (TIMESTAMP)
- updated_at (TIMESTAMP)

### 5.2 食谱表（recipes）
- recipe_id (PK, UUID)
- title (VARCHAR(255))
- description (TEXT)
- ingredients (JSONB)
- steps (JSONB)
- cooking_time (INTEGER)
- difficulty (VARCHAR(50))
- nutrition_info (JSONB)
- image_url (VARCHAR(500))
- tags (JSONB)
- created_at (TIMESTAMP)
- updated_at (TIMESTAMP)

### 5.3 收藏表（favorites）
- favorite_id (PK, UUID)
- user_id (FK, UUID)
- recipe_id (FK, UUID)
- created_at (TIMESTAMP)

### 5.4 评分表（ratings）
- rating_id (PK, UUID)
- user_id (FK, UUID)
- recipe_id (FK, UUID)
- score (INTEGER)
- comment (TEXT)
- created_at (TIMESTAMP)

### 5.5 食材表（ingredients）
- ingredient_id (PK, UUID)
- name (VARCHAR(255))
- nutrition_info (JSONB)
- unit (VARCHAR(50))

## 6. API接口设计

### 6.1 用户管理接口
- **POST /api/auth/register** - 用户注册
- **POST /api/auth/login** - 用户登录
- **GET /api/users/me** - 获取当前用户信息
- **PUT /api/users/me/preferences** - 更新用户饮食偏好

### 6.2 食谱管理接口
- **POST /api/recipes/generate** - 根据食材生成食谱
- **GET /api/recipes** - 获取食谱列表
- **GET /api/recipes/{recipe_id}** - 获取食谱详情
- **GET /api/recipes/search** - 搜索食谱

### 6.3 用户交互接口
- **POST /api/recipes/{recipe_id}/favorite** - 收藏食谱
- **DELETE /api/recipes/{recipe_id}/favorite** - 取消收藏
- **POST /api/recipes/{recipe_id}/rate** - 评分食谱
- **GET /api/users/me/favorites** - 获取用户收藏列表

## 7. 系统架构

### 7.1 整体架构
- **前端层**：React单页应用
- **API网关层**：处理请求路由和认证
- **服务层**：FastAPI后端服务
- **数据访问层**：SQLAlchemy ORM
- **数据库层**：PostgreSQL
- **外部服务层**：阿里通义千问API

### 7.2 模块划分
- **认证模块**：用户身份验证
- **食谱模块**：食谱生成和管理
- **用户模块**：用户信息和偏好管理
- **营养分析模块**：营养成分计算
- **推荐模块**：个性化推荐算法

## 8. 部署与集成方案

### 8.1 开发环境
- 前端：Node.js + React开发服务器
- 后端：FastAPI开发服务器
- 数据库：PostgreSQL本地实例

### 8.2 测试环境
- 前端：静态资源部署到测试服务器
- 后端：FastAPI应用部署到测试服务器
- 数据库：专用测试数据库

### 8.3 生产环境
- 前端：静态资源部署到CDN
- 后端：容器化部署到云服务器
- 数据库：云数据库服务

## 9. 项目进度计划

### 9.1 阶段一：需求分析与设计（2周）
- 完成需求细化
- 设计系统架构
- 设计数据库模型

### 9.2 阶段二：核心功能开发（4周）
- 前端基础框架搭建
- 后端API开发
- 数据库实现
- AI接口集成

### 9.3 阶段三：功能完善与测试（2周）
- 前端UI优化
- 后端性能调优
- 系统测试与Bug修复

### 9.4 阶段四：部署与上线（1周）
- 环境配置
- 系统部署
- 上线前检查

## 10. 验收标准

### 10.1 功能验收
- 用户能成功输入食材和饮食禁忌
- 系统能生成符合条件的食谱
- 用户能收藏和评分食谱
- 营养成分计算准确

### 10.2 性能验收
- 前端页面加载时间≤2秒
- 食谱生成响应时间≤10秒
- 系统支持50并发用户访问

### 10.3 安全验收
- 用户密码加密存储
- API访问需要认证
- 敏感数据加密传输

---

**文档版本**: v1.0
**编制日期**: 2025年
**项目负责人**: 
**团队成员**: